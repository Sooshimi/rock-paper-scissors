<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rock Paper Scissors</title>
</head>

<body>
  <button class="rock">Rock</button>
  <button class="paper">Paper</button>
  <button class="scissors">Scissors</button>

  <div class="roundResult"></div>
  <div>
    <h2>Player score:</h2>
    <div class="playerScore">0</div>
    <h2>Computer score:</h2>
    <div class="computerScore">0</div>
  </div>
  <div class="finalResult"></div>

</body>

<script>
  // Function which randomly returns "rock", "paper", or "scissors"
  function getComputerChoice() {
    let random = Math.floor(Math.random() * 3);

    if (random === 0) {
      computerChoice = "rock";
    } else if (random === 1) {
      computerChoice = "paper";
    } else {
      computerChoice = "scissors";
    }

    return computerChoice;
  }

  // Function which plays a single round
  function playRound(playerSelection, computerSelection) {
    if (
      (computerSelection === "rock" && playerSelection === "scissors") ||
      (computerSelection === "paper" && playerSelection === "rock") ||
      (computerSelection === "scissors" && playerSelection === "paper")) {
      updateScore("computerWin");
    } else if (
      (playerSelection === "rock" && computerSelection === "scissors") ||
      (playerSelection === "paper" && computerSelection === "rock") ||
      (playerSelection === "scissors" && computerSelection === "paper")) {
      updateScore("playerWin");
    } else {
      updateScore();
    }
    console.log("Player score: ", playerScore);
    console.log("Computer score: ", computerScore);
  }

  function updateScore(winner = "") {
    if (playerScore < 5 && computerScore < 5) {
      if (winner === "computerWin") {
        computerScore += 1;
        const text = document.createTextNode("You lost the round!");
        const score = document.createTextNode(computerScore);
        checkAndAppendChild(text, roundResultDiv);
        checkAndAppendChild(score, computerScoreDiv);
      }
      else if (winner === "playerWin") {
        playerScore += 1;
        const text = document.createTextNode("You won the round!");
        const score = document.createTextNode(playerScore);
        checkAndAppendChild(text, roundResultDiv);
        checkAndAppendChild(score, playerScoreDiv);
      }
      else {
        const text = document.createTextNode("It's a tie round!")
        checkAndAppendChild(text, roundResultDiv);
      }
    }
    else return;
  }

  function checkAndAppendChild(text, node) {
    if (node.hasChildNodes()) {
      node.removeChild(node.firstChild);
      node.appendChild(text);
    }
    else node.appendChild(text);
  }

  let computerChoice;
  let playerSelection;
  let playerScore = 0;
  let computerScore = 0;
  const buttons = document.querySelectorAll("button");
  const roundResultDiv = document.querySelector("div.roundResult");
  const playerScoreDiv = document.querySelector("div.playerScore");
  const computerScoreDiv = document.querySelector("div.computerScore");

  buttons.forEach((button) =>
    button.addEventListener("click", function buttonClick() {
      if (button.className === "rock") {
        playerSelection = "rock";
      }
      else if (button.className === "paper") {
        playerSelection = "paper";
      }
      else if (button.className === "scissors") {
        playerSelection = "scissors"
      }

      let computerSelection = getComputerChoice();
      playRound(playerSelection, computerSelection);
    }));

</script>

</html>