<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rock Paper Scissors</title>
</head>

<body>
  <button class="rock">Rock</button>
  <button class="paper">Paper</button>
  <button class="scissors">Scissors</button>

  <div class="result"></div>
  <div>
    <h2>Player score:</h2>
    <div class="playerScore">0</div>
    <h2>Computer score:</h2>
    <div class="computerScore">0</div>
  </div>

</body>

<script>
  // Function which randomly returns "rock", "paper", or "scissors"
  function getComputerChoice() {
    let random = Math.floor(Math.random() * 3);

    if (random === 0) {
      computerChoice = "rock";
    } else if (random === 1) {
      computerChoice = "paper";
    } else {
      computerChoice = "scissors";
    }

    return computerChoice;
  }

  // Function which plays a single round
  function playRound(playerSelection, computerSelection) {
    if (
      (computerSelection === "rock" && playerSelection === "scissors") ||
      (computerSelection === "paper" && playerSelection === "rock") ||
      (computerSelection === "scissors" && playerSelection === "paper")) {
        computerScore += 1;
        const text = document.createTextNode("You lose!");
        const score = document.createTextNode(computerScore);
        checkAndAppendChild(text, resultDiv);
        checkAndAppendChild(score, computerScoreDiv);
    } else if (
      (playerSelection === "rock" && computerSelection === "scissors") ||
      (playerSelection === "paper" && computerSelection === "rock") ||
      (playerSelection === "scissors" && computerSelection === "paper")) {
        playerScore += 1;
        const score = document.createTextNode(playerScore);
        const text = document.createTextNode("You win!")
        checkAndAppendChild(text, resultDiv);
        checkAndAppendChild(score, playerScoreDiv);
    } else {
      const text = document.createTextNode("It's a tie!")
      checkAndAppendChild(text, resultDiv);
    }
    console.log("Player score: ", playerScore);
    console.log("Computer score: ", computerScore);
  }

  function checkAndAppendChild(text, node) {
    if (node.hasChildNodes()) {
      node.removeChild(node.firstChild);
      node.appendChild(text);
    }
    else node.appendChild(text);
  }

  // Function to loop the game for 5 rounds
  // function game() {
  //   for (let i = 0; i < 5; i++) {
  //     let playerSelection = window.prompt("rock/paper/scissors?").toLowerCase();
  //     console.log("Round ", i + 1)
  //     let computerSelection = getComputerChoice();
  //     result = playRound(playerSelection, computerSelection);
  //     console.log("Computer:", computerSelection);
  //     console.log("Player :", playerSelection);
  //     console.log(result);

  //   let playerSelection = "rock";
  //   let computerSelection = getComputerChoice();
  //   result = playRound(playerSelection, computerSelection);
  //   console.log("Computer:", computerSelection);
  //   console.log("Player :", playerSelection);
  //   console.log(result);
  // }

  let computerChoice;
  let playerSelection;
  let playerScore = 0;
  let computerScore = 0;
  const buttons = document.querySelectorAll("button");
  const resultDiv = document.querySelector("div.result");
  const playerScoreDiv = document.querySelector("div.playerScore");
  const computerScoreDiv = document.querySelector("div.computerScore");

  buttons.forEach((button) => button.addEventListener('click', () => {
    if (button.className === "rock") {
      playerSelection = "rock";
    }
    else if (button.className === "paper") {
      playerSelection = "paper";
    }
    else if (button.className === "scissors") {
      playerSelection = "scissors"
    }

    let computerSelection = getComputerChoice();
    playRound(playerSelection, computerSelection);
  }));

</script>

</html>