<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rock Paper Scissors</title>
</head>

<body>
  <button class="rock"></button>
  <button class="paper"></button>
  <button class="scissors"></button>

  <div></div>
</body>

<script>
  // Function which randomly returns "rock", "paper", or "scissors"
  function getComputerChoice() {
    let random = Math.floor(Math.random() * 3);
    let computerChoice;
    let playerSelection;

    if (random === 0) {
      computerChoice = "rock";
    } else if (random === 1) {
      computerChoice = "paper";
    } else {
      computerChoice = "scissors";
    }

    return computerChoice;
  }

  // Function which plays a single round
  function playRound(playerSelection, computerSelection) {
    if (
      (computerSelection === "rock" && playerSelection === "scissors") ||
      (computerSelection === "paper" && playerSelection === "rock") ||
      (computerSelection === "scissors" && playerSelection === "paper")) {
      const text = document.createTextNode("You lose!")
      checkAndAppendChild(text, myDiv);
    } else if (
      (playerSelection === "rock" && computerSelection === "scissors") ||
      (playerSelection === "paper" && computerSelection === "rock") ||
      (playerSelection === "scissors" && computerSelection === "paper")) {
      const text = document.createTextNode("You win!")
      checkAndAppendChild(text, myDiv);
    } else {
      const text = document.createTextNode("It's a tie!")
      checkAndAppendChild(text, myDiv);
    }
  }

  function checkAndAppendChild(text, node) {
    if (node.hasChildNodes()) {
        node.removeChild(node.firstChild);
        node.appendChild(text);
      }
    else node.appendChild(text);
  }

  // Function to loop the game for 5 rounds
  // function game() {
  //   for (let i = 0; i < 5; i++) {
  //     let playerSelection = window.prompt("rock/paper/scissors?").toLowerCase();
  //     console.log("Round ", i + 1)
  //     let computerSelection = getComputerChoice();
  //     result = playRound(playerSelection, computerSelection);
  //     console.log("Computer:", computerSelection);
  //     console.log("Player :", playerSelection);
  //     console.log(result);

  //   let playerSelection = "rock";
  //   let computerSelection = getComputerChoice();
  //   result = playRound(playerSelection, computerSelection);
  //   console.log("Computer:", computerSelection);
  //   console.log("Player :", playerSelection);
  //   console.log(result);
  // }

  const buttons = document.querySelectorAll("button");
  const myDiv = document.querySelector("div");

  buttons.forEach((button) => button.addEventListener('click',() => {
      if (button.className === "rock") {
        playerSelection = "rock";
      }
      else if (button.className === "paper") {
        playerSelection = "paper";
      }
      else if (button.className === "scissors") {
        playerSelection = "scissors"
      }
    
      let computerSelection = getComputerChoice();
      playRound(playerSelection, computerSelection);
    }));

</script>

</html>